var m=(a,e,t)=>{if(!e.has(a))throw TypeError("Cannot "+t)};var n=(a,e,t)=>(m(a,e,"read from private field"),t?t.call(a):e.get(a)),l=(a,e,t)=>{if(e.has(a))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(a):e.set(a,t)},f=(a,e,t,r)=>(m(a,e,"write to private field"),r?r.call(a,t):e.set(a,t),t);import"./assets/styles-c850a7ca.js";import{a as P,i,P as q}from"./assets/vendor-438c2869.js";var p,y,u,g;class M{constructor(){l(this,p,"https://api.unsplash.com/search/photos");l(this,y,"gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58");l(this,u,"");l(this,g,new URLSearchParams({per_page:12,orientation:"portrait",client_id:n(this,y)}))}async fetchPopularPhotos(e){const t=`${n(this,p)}?query=popular&page=${e}&${n(this,g)}`;try{const{data:r}=await P.get(t);return r}catch{i.error({title:"Error",message:"Something went wrong. Try again later"})}}async fetchFotosByQuery(e){const t=`${n(this,p)}?query=${n(this,u)}&page=${e}&${n(this,g)}`;try{const{data:r}=await P.get(t);return r}catch{i.error({title:"Error",message:"Something went wrong. Try again later"})}}set query(e){f(this,u,e)}}p=new WeakMap,y=new WeakMap,u=new WeakMap,g=new WeakMap;function h(a){return a.map(({urls:e,alt_description:t})=>`<li class='gallery__item'><img src='${e.small}' alt='${t}'></li>`).join("")}const s={gallery:document.querySelector(".js-gallery"),paginationContainer:document.querySelector(".tui-pagination"),searchForm:document.querySelector(".js-search-form")},$={totalItems:0,itemsPerPage:12,visiblePages:5,page:1,template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}},o=new q(s.paginationContainer,$),b=o.getCurrentPage(),c=new M;c.fetchPopularPhotos(b).then(({total:a,results:e})=>{const t=h(e);s.gallery.innerHTML=t,o.reset(a)});o.on("afterMove",w);function w(a){const e=a.page;c.fetchPopularPhotos(e).then(({results:t})=>{const r=h(t);s.gallery.innerHTML=r})}s.searchForm.addEventListener("submit",S);function S(a){a.preventDefault();const e=a.target.elements.query.value.trim();if(!e){i.warning({title:"Caution",message:"Please enter query word"});return}o.off("afterMove",w),o.off("afterMove",d),c.query=e,c.fetchFotosByQuery(b).then(({total:t,results:r})=>{if(r.length===0){i.warning({title:"Caution",message:"Please try another word"});return}t<=12?s.paginationContainer.style.display="none":s.paginationContainer.style.display="block";const v=h(r);s.gallery.innerHTML=v,i.success({title:"OK",message:`We found ${t} images`}),o.reset(t)}).catch(t=>{i.error({title:"Error",message:"Illegal operation"})}),o.on("afterMove",d),searchForm.reset()}function d(a){const e=a.page;c.fetchFotosByQuery(e).then(({results:t})=>{const r=h(t);s.gallery.innerHTML=r})}
//# sourceMappingURL=commonHelpers.js.map
