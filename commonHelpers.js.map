{"version":3,"file":"commonHelpers.js","sources":["../src/js/UnsplashAPI.js","../src/js/createGallery.js","../src/js/refs.js","../src/js/gallery.js"],"sourcesContent":["import axios from \"axios\";\n\nexport class UnsplashAPI{\n    #BASE_URL = 'https://api.unsplash.com/search/photos';\n    #API_KEY = 'gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58';\n    #query = '';\n\n    async fetchPopularPhotos(page){\n        const url = `${this.#BASE_URL}?query=popular&page=${page}&per_page=12&orientation=portrait&client_id=${this.#API_KEY}`;\n        try{\n            const {data} =  await axios.get(url);\n            return data;\n        }\n        catch(e){\n            console.log(\"Bad request!!!!\");\n        }\n    }\n\n    async fetchFotosByQuery(page) {\n        const url = `${this.#BASE_URL}?query=${this.#query}&page=${page}&per_page=12&orientation=portrait&client_id=${this.#API_KEY}`;\n        try{\n            const {data} =  await axios.get(url);\n            return data;\n        }\n        catch(e){\n            console.log(\"Bad request!!!!\");\n        }\n    }\n\n    set query(newQuery) {\n        this.#query = newQuery;\n    }\n\n\n}","export function createGalleryCard(images) {\n  return images\n    .map(\n      ({ urls, alt_description }) =>\n        `<li class='gallery__item'><img src='${urls.small}' alt='${alt_description}'></li>`\n    )\n    .join('');\n}","export const refs = {\n    gallery: document.querySelector('.js-gallery'),\n    paginationContainer: document.querySelector('.tui-pagination'),\n    searchForm: document.querySelector('.js-search-form'),\n}","import { UnsplashAPI } from './UnsplashAPI';\nimport { createGalleryCard } from './createGallery';\nimport { refs } from './refs';\nimport Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.min.css';\n\nconst options = { \n    totalItems: 0,\n    itemsPerPage: 12,\n    visiblePages: 5,\n    page: 1,\n}\n\nconst pagination = new Pagination(refs.paginationContainer, options);\n\nconst page = pagination.getCurrentPage();\n\nconst service = new UnsplashAPI();\nservice.fetchPopularPhotos(page)\n    .then(({total, results}) => {\n        const markup = createGalleryCard(results)\n        refs.gallery.innerHTML = markup;\n        pagination.reset(total);\n    });\n\npagination.on('afterMove', (event) => {\n     const currentPage = event.page;\n    service.fetchPopularPhotos(currentPage)\n        .then(({ results }) => {\n        const markup = createGalleryCard(results)\n        refs.gallery.innerHTML = markup;\n            }\n        );\n});\n\nrefs.searchForm.addEventListener(\"submit\", searchFormFoto);\n\nfunction searchFormFoto(event) {\n    event.preventDefault();\n    const searchQuery = event.target.elements.query.value.trim();\n    if (!searchQuery) {\n        return;\n    }\n    service.query = searchQuery;\n    service.fetchFotosByQuery(page)\n        .then(({ total, results }) => {\n            if (results.length === 0) {\n                return\n            }\n        const markup = createGalleryCard(results)\n        refs.gallery.innerHTML = markup;\n        pagination.reset(total);\n    }\n        \n    )\n};\n"],"names":["UnsplashAPI","__privateAdd","_BASE_URL","_API_KEY","_query","page","url","__privateGet","data","axios","newQuery","__privateSet","createGalleryCard","images","urls","alt_description","refs","options","pagination","Pagination","service","total","results","markup","event","currentPage","searchFormFoto","searchQuery"],"mappings":"wbAEO,MAAMA,CAAW,CAAjB,cACHC,EAAA,KAAAC,EAAY,0CACZD,EAAA,KAAAE,EAAW,+CACXF,EAAA,KAAAG,EAAS,IAET,MAAM,mBAAmBC,EAAK,CAC1B,MAAMC,EAAM,GAAGC,EAAA,KAAKL,EAAS,uBAAuBG,CAAI,+CAA+CE,EAAA,KAAKJ,EAAQ,GACpH,GAAG,CACC,KAAM,CAAC,KAAAK,CAAI,EAAK,MAAMC,EAAM,IAAIH,CAAG,EACnC,OAAOE,CACV,MACO,CACJ,QAAQ,IAAI,iBAAiB,CAChC,CACJ,CAED,MAAM,kBAAkBH,EAAM,CAC1B,MAAMC,EAAM,GAAGC,EAAA,KAAKL,EAAS,UAAUK,EAAA,KAAKH,EAAM,SAASC,CAAI,+CAA+CE,EAAA,KAAKJ,EAAQ,GAC3H,GAAG,CACC,KAAM,CAAC,KAAAK,CAAI,EAAK,MAAMC,EAAM,IAAIH,CAAG,EACnC,OAAOE,CACV,MACO,CACJ,QAAQ,IAAI,iBAAiB,CAChC,CACJ,CAED,IAAI,MAAME,EAAU,CAChBC,EAAA,KAAKP,EAASM,EACjB,CAGL,CA/BIR,EAAA,YACAC,EAAA,YACAC,EAAA,YCLG,SAASQ,EAAkBC,EAAQ,CACxC,OAAOA,EACJ,IACC,CAAC,CAAE,KAAAC,EAAM,gBAAAC,CAAiB,IACxB,uCAAuCD,EAAK,KAAK,UAAUC,CAAe,SAC7E,EACA,KAAK,EAAE,CACZ,CCPO,MAAMC,EAAO,CAChB,QAAS,SAAS,cAAc,aAAa,EAC7C,oBAAqB,SAAS,cAAc,iBAAiB,EAC7D,WAAY,SAAS,cAAc,iBAAiB,CACxD,ECEMC,EAAU,CACZ,WAAY,EACZ,aAAc,GACd,aAAc,EACd,KAAM,CACV,EAEMC,EAAa,IAAIC,EAAWH,EAAK,oBAAqBC,CAAO,EAE7DZ,EAAOa,EAAW,iBAElBE,EAAU,IAAIpB,EACpBoB,EAAQ,mBAAmBf,CAAI,EAC1B,KAAK,CAAC,CAAC,MAAAgB,EAAO,QAAAC,CAAO,IAAM,CACxB,MAAMC,EAASX,EAAkBU,CAAO,EACxCN,EAAK,QAAQ,UAAYO,EACzBL,EAAW,MAAMG,CAAK,CAC9B,CAAK,EAELH,EAAW,GAAG,YAAcM,GAAU,CACjC,MAAMC,EAAcD,EAAM,KAC3BJ,EAAQ,mBAAmBK,CAAW,EACjC,KAAK,CAAC,CAAE,QAAAH,KAAc,CACvB,MAAMC,EAASX,EAAkBU,CAAO,EACxCN,EAAK,QAAQ,UAAYO,CACpB,CACb,CACA,CAAC,EAEDP,EAAK,WAAW,iBAAiB,SAAUU,CAAc,EAEzD,SAASA,EAAeF,EAAO,CAC3BA,EAAM,eAAc,EACpB,MAAMG,EAAcH,EAAM,OAAO,SAAS,MAAM,MAAM,OACjDG,IAGLP,EAAQ,MAAQO,EAChBP,EAAQ,kBAAkBf,CAAI,EACzB,KAAK,CAAC,CAAE,MAAAgB,EAAO,QAAAC,KAAc,CAC1B,GAAIA,EAAQ,SAAW,EACnB,OAER,MAAMC,EAASX,EAAkBU,CAAO,EACxCN,EAAK,QAAQ,UAAYO,EACzBL,EAAW,MAAMG,CAAK,CACzB,CAEA,EACL"}